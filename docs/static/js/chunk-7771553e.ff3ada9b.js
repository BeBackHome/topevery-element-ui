(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7771553e"],{"780a":function(t,e,n){},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),o=n("a691"),l=n("50c4"),r=n("7b0b"),s=n("65f0"),p=n("8418"),u=n("1dde"),c=n("ae40"),d=u("splice"),g=c("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,f=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!g},{splice:function(t,e){var n,a,u,c,d,g,v=r(this),P=l(v.length),k=i(t,P),b=arguments.length;if(0===b?n=a=0:1===b?(n=0,a=P-k):(n=b-2,a=f(y(o(e),0),P-k)),P+n-a>h)throw TypeError(m);for(u=s(v,a),c=0;c<a;c++)d=k+c,d in v&&p(u,c,v[d]);if(u.length=a,n<a){for(c=k;c<P-a;c++)d=c+a,g=c+n,d in v?v[g]=v[d]:delete v[g];for(c=P;c>P-a+n;c--)delete v[c-1]}else if(n>a)for(c=P-a;c>k;c--)d=c+a-1,g=c+n-1,d in v?v[g]=v[d]:delete v[g];for(c=0;c<n;c++)v[c+k]=arguments[c+2];return v.length=P-a+n,u}})},b380:function(t,e,n){"use strict";var a=n("780a"),i=n.n(a);i.a},c740:function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").findIndex,o=n("44d2"),l=n("ae40"),r="findIndex",s=!0,p=l(r);r in[]&&Array(1)[r]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!p},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},cc45:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("点击打开地图。加载鼠标绘制工具。视图最佳视角移动")]),n("SearchBar",{attrs:{data:t.searchData}}),n("Cube-Dialog",{attrs:{fullscreen:"",title:"提示","destroy-on-close":!1,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.dialogVisible?n("Add"):t._e()],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map"},[n("div",{staticClass:"CubeMap",attrs:{id:"CubeMap"}}),n("div",{staticClass:"tools"},[n("el-button",{attrs:{type:"primary"},on:{click:t.stopDraw}},[t._v(" 停止绘制 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.draw(1)}}},[t._v("标点")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.draw(2)}}},[t._v("画线")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.draw(3)}}},[t._v("画面")]),n("el-button",{attrs:{type:"danger"},on:{click:t.cleanMap}},[t._v(" 清空所有绘制 ")]),n("el-tooltip",{attrs:{placement:"top",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 1、已绘制图层双击取消删除 "),n("br"),t._v(" 2、清空所有绘制会清空地图上所有图形 "),n("br"),t._v(" 2、画面、画线操作时,双击完成绘制 ")]),n("el-button",[t._v("操作说明")])],1)],1)])},l=[],r=(n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("c740"),n("4160"),n("d81d"),n("a434"),n("a9e3"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("5530")),s=[[{lng:114.295603,lat:22.612399},{lng:114.303652,lat:22.609463},{lng:114.310551,lat:22.612399},{lng:114.315725,lat:22.607861},{lng:114.326648,lat:22.611865},{lng:114.331822,lat:22.616135},{lng:114.345908,lat:22.611598},{lng:114.363155,lat:22.619071},{lng:114.369479,lat:22.627344},{lng:114.388452,lat:22.62174},{lng:114.399375,lat:22.636951},{lng:114.445943,lat:22.663234},{lng:114.423521,lat:22.684043},{lng:114.378103,lat:22.657231},{lng:114.384715,lat:22.666836},{lng:114.367755,lat:22.676173},{lng:114.346483,lat:22.67724},{lng:114.325211,lat:22.671638},{lng:114.301639,lat:22.667903},{lng:114.283242,lat:22.663634},{lng:114.294453,lat:22.653229},{lng:114.27778,lat:22.652962},{lng:114.270019,lat:22.645757},{lng:114.268007,lat:22.637485},{lng:114.278643,lat:22.633215},{lng:114.28353,lat:22.629479},{lng:114.272319,lat:22.614534},{lng:114.286117,lat:22.611865}],[{lng:114.350795,lat:22.718984},{lng:114.356256,lat:22.694446},{lng:114.390464,lat:22.691512},{lng:114.400812,lat:22.684043},{lng:114.435595,lat:22.694446},{lng:114.461466,lat:22.690712},{lng:114.453992,lat:22.710183},{lng:114.425821,lat:22.726184},{lng:114.375229,lat:22.730451}]],p={name:"CubeMapDraw",props:{clear:{type:Boolean,default:!0},fillOpacity:{type:Number,default:.5},fillColor:{type:String,default:"#fff"},strokeColor:{type:String,default:"blue"},strokeWeight:{type:Number,default:1},isEditing:{type:Boolean,default:!0},isShow:{type:Boolean,default:!0},type:{type:Array,default:function(){return[1,2,3]}},markerPoint:{type:Object,default:function(){return{lng:null,lat:null}}},markerPoints:{type:Array,default:function(){return[]}},linePoints:{type:Array,default:function(){return[]}},polygonPoints:{type:Array,default:function(){return[1]}},canDbclick:{type:Boolean,default:!0},oneMarker:{type:Boolean,default:!1}},data:function(){return{map:null,drawType:null,oneMarkerPoint:null,markerPointList:[],linePointList:[],polygonPointList:[],styleOptions:{strokeColor:"#3689F3",fillColor:"#3689F3",strokeWeight:2,strokeOpacity:.8,fillOpacity:.4,strokeStyle:"dashed。"}}},mounted:function(){var t=this;this.$nextTick().then((function(e){setTimeout((function(){t.mapReady()}),200)}))},methods:{mapReady:function(){var t=this;this.map=new BMap.Map("CubeMap",{enableMapClick:!1,minZoom:12}),this.map.centerAndZoom(new BMap.Point(114.12744,22.64469),13),this.map.enableScrollWheelZoom(!0),this.$nextTick().then((function(e){setTimeout((function(){t.initDrawingManager(t.map)}),200)}))},initDrawLoadData:function(){var t=this,e=[];Array.isArray(this.polygonPoints)&&this.polygonPoints.length&&s.forEach((function(n){var a=n.map((function(t){return new BMap.Point(t.lng,t.lat)})),i=!0,o=!1,l=void 0;try{for(var s,p=a[Symbol.iterator]();!(i=(s=p.next()).done);i=!0){var u=s.value,c=u.lng,d=u.lat,g=new BMap.Point(c,d),y=new BMap.Marker(g);y._key_=t.getRandomID(),t.map.addOverlay(y)}}catch(m){o=!0,l=m}finally{try{i||null==p.return||p.return()}finally{if(o)throw l}}var f=new BMap.Polygon(a,Object(r["a"])({},t.styleOptions));if(f){var h=t;f._key_=t.getRandomID(),t.polygonPointList.push(f),f.addEventListener("dblclick",(function(t){t.domEvent.preventDefault(),h.map&&h.map.removeOverlay(this);var e=h.polygonPointList.findIndex((function(e){return e._key_!==t._key_}));h.polygonPointList=h.polygonPointList.splice(e,1)}))}setTimeout((function(){t.polygonPointList.length&&t.polygonPointList.map((function(t){return t.enableEditing()}))}),20),t.map.addOverlay(f),e=e.concat(a)})),this.map&&this.map.setViewport(e)},getRandomID:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36;return Number(Math.random().toString().substr(3,t)+Date.now()).toString(36)+(new Date).getTime()},initDrawingManager:function(t){var e=this,n=this.styleOptions;this.drawingManager=new BMapLib.DrawingManager(t,{isOpen:!1,enableDrawingTool:!1,drawingMode:BMAP_DRAWING_POLYGON,drawingToolOptions:{anchor:BMAP_ANCHOR_TOP_RIGHT,offset:new BMap.Size(5,5),drawingTypes:[BMAP_DRAWING_MARKER,BMAP_DRAWING_POLYLINE,BMAP_DRAWING_POLYGON]},circleOptions:n,polylineOptions:n,polygonOptions:n,rectangleOptions:n}),this.drawingManager&&this.drawingManager.addEventListener("overlaycomplete",this.overlaycomplete),this.$nextTick().then((function(t){setTimeout((function(){e.initDrawLoadData(e.map)}),200)}))},draw:function(t){switch(t){case 1:this.drawingManager.open(),this.drawingManager.setDrawingMode(BMAP_DRAWING_MARKER);break;case 2:this.drawingManager.open(),this.drawingManager.setDrawingMode(BMAP_DRAWING_POLYLINE);break;case 3:this.drawingManager.open(),this.drawingManager.setDrawingMode(BMAP_DRAWING_POLYGON);break;default:break}},overlaycomplete:function(t){var e=this,n=t.overlay;if(n._key_=this.getRandomID(),e.drawType=n.BQ,"Marker"!==e.drawType)"Polygon"===e.drawType?this.polygonPointList.push(n):this.linePointList.push(n),n.enableEditing(),n.addEventListener("dblclick",(function(t){if(t.domEvent.preventDefault(),e.map&&e.map.removeOverlay(this),e.map&&e.map.removeOverlay(n),"Polygon"===e.drawType){var a=e.polygonPointList.findIndex((function(e){return e._key_!==t._key_}));e.polygonPointList=e.polygonPointList.splice(a,1)}else{var i=e.linePointList.findIndex((function(e){return e._key_!==t._key_}));e.linePointList=e.linePointList.splice(i,1)}}));else{var a=e.oneMarker,i=e.oneMarkerPoint;a?(i&&e.map&&e.map.removeOverlay(i),e.oneMarkerPoint=n,n.addEventListener("dblclick",(function(t){t.domEvent.preventDefault(),e.map&&e.map.removeOverlay(this),e.oneMarkerPoint=null}))):(this.markerPointList.push(n),n.addEventListener("dblclick",(function(t){t.domEvent.preventDefault(),e.map&&e.map.removeOverlay(this);var n=e.markerPointList.findIndex((function(e){return e._key_!==t._key_}));e.markerPointList=e.markerPointList.splice(n,1)})))}},cleanMap:function(){this.drawingManager&&this.drawingManager.close(),this.map&&this.map.clearOverlays(),this.markerPointList=[],this.linePointList=[],this.polygonPointList=[]},stopDraw:function(){this.drawingManager&&this.drawingManager.close()},getPolygonPointListPoints:function(){return this.polygonPointList.map((function(t){return t.getPath()}))||[]},getLinePointList:function(){return this.linePointList.map((function(t){return t.getPath()}))||[]},getMarkerPointList:function(){return this.markerPointList.map((function(t){return t.getPosition()}))||[]},getMarkerPoint:function(){return this.oneMarkerPoint?this.oneMarkerPoint.getPosition():null},getAllPointListt:function(){return{oneMarkerPoint:this.oneMarkerPoint?this.oneMarkerPoint.getPosition():null,markerPointList:this.markerPointList.map((function(t){return t.getPosition()}))||[],linePointList:this.linePointList.map((function(t){return t.getPath()}))||[],polygonPointList:this.polygonPointList.map((function(t){return t.getPath()}))||[]}}}},u=p,c=(n("b380"),n("2877")),d=Object(c["a"])(u,o,l,!1,null,"a7c1bc46",null),g=d.exports,y={components:{Add:g},data:function(){return{dialogVisible:!1,searchData:[[{type:"input",value:null,key:"boxCode",placeholder:"输入框",class:"w160"},{type:"input",value:null,key:"boxCode",placeholder:"输入框",class:"w160"},{type:"input",value:null,key:"boxCode",placeholder:"输入框",class:"w160"},{type:"option",value:null,key:"boxType",placeholder:"选择",options:[{label:"分体",value:1},{label:"连体",value:2}]},{type:"date",value:null,key:"boxCode",placeholder:"日期",class:"w160"},{type:"datetime",value:null,key:"boxCode",placeholder:"日期时间",class:"w160"},{type:"multiple-date",dateType:0,value:[],key1:"startDate",key2:"endDate",placeholder1:"开始日期",placeholder2:"结束日期"},{type:"multiple-date",dateType:1,value:[],key1:"startDate",key2:"endDate",placeholder1:"开始时间",placeholder2:"结束时间"},{type:"search",name:"查询",icon:"el-icon-search"}],[{type:"button",name:"调入",keyType:"primary",icon:"el-icon-upload2"},{type:"button",name:"调出",keyType:"danger",icon:"el-icon-close"}]]}}},f=y,h=Object(c["a"])(f,a,i,!1,null,"139d6413",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-7771553e.ff3ada9b.js.map